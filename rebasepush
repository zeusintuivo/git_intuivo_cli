#/bin/bash

PULLCURRENTBRANCH=$(git rev-parse --abbrev-ref HEAD);
TARGETBRNACH="${1:-main}"

echo "git fetch -f origin ${TARGETBRNACH}:${TARGETBRNACH}"
git fetch -f origin "${TARGETBRNACH}":"${TARGETBRNACH}"
echo "git fetch "
git fetch 
echo "git rebase ${TARGETBRNACH}"
git rebase "${TARGETBRNACH}"
# echo "git push --set-upstream origin ${PULLCURRENTBRANCH}"
# git push --set-upstream origin "${PULLCURRENTBRANCH}"
echo 'git branch --set-upstream-to=origin/'"${PULLCURRENTBRANCH}"'  '"${PULLCURRENTBRANCH}"
git branch --set-upstream-to=origin/"${PULLCURRENTBRANCH}"  "${PULLCURRENTBRANCH}"

echo "git push --force"
git push --force
